{
  "version": 3,
  "sources": ["../../troika-worker-utils/dist/troika-worker-utils.esm.js"],
  "sourcesContent": ["/**\n * Main content for the worker that handles the loading and execution of\n * modules within it.\n */\nfunction workerBootstrap() {\n  var modules = Object.create(null);\n\n  // Handle messages for registering a module\n  function registerModule(ref, callback) {\n    var id = ref.id;\n    var name = ref.name;\n    var dependencies = ref.dependencies; if ( dependencies === void 0 ) dependencies = [];\n    var init = ref.init; if ( init === void 0 ) init = function(){};\n    var getTransferables = ref.getTransferables; if ( getTransferables === void 0 ) getTransferables = null;\n\n    // Only register once\n    if (modules[id]) { return }\n\n    try {\n      // If any dependencies are modules, ensure they're registered and grab their value\n      dependencies = dependencies.map(function (dep) {\n        if (dep && dep.isWorkerModule) {\n          registerModule(dep, function (depResult) {\n            if (depResult instanceof Error) { throw depResult }\n          });\n          dep = modules[dep.id].value;\n        }\n        return dep\n      });\n\n      // Rehydrate functions\n      init = rehydrate((\"<\" + name + \">.init\"), init);\n      if (getTransferables) {\n        getTransferables = rehydrate((\"<\" + name + \">.getTransferables\"), getTransferables);\n      }\n\n      // Initialize the module and store its value\n      var value = null;\n      if (typeof init === 'function') {\n        value = init.apply(void 0, dependencies);\n      } else {\n        console.error('worker module init function failed to rehydrate');\n      }\n      modules[id] = {\n        id: id,\n        value: value,\n        getTransferables: getTransferables\n      };\n      callback(value);\n    } catch(err) {\n      if (!(err && err.noLog)) {\n        console.error(err);\n      }\n      callback(err);\n    }\n  }\n\n  // Handle messages for calling a registered module's result function\n  function callModule(ref, callback) {\n    var ref$1;\n\n    var id = ref.id;\n    var args = ref.args;\n    if (!modules[id] || typeof modules[id].value !== 'function') {\n      callback(new Error((\"Worker module \" + id + \": not found or its 'init' did not return a function\")));\n    }\n    try {\n      var result = (ref$1 = modules[id]).value.apply(ref$1, args);\n      if (result && typeof result.then === 'function') {\n        result.then(handleResult, function (rej) { return callback(rej instanceof Error ? rej : new Error('' + rej)); });\n      } else {\n        handleResult(result);\n      }\n    } catch(err) {\n      callback(err);\n    }\n    function handleResult(result) {\n      try {\n        var tx = modules[id].getTransferables && modules[id].getTransferables(result);\n        if (!tx || !Array.isArray(tx) || !tx.length) {\n          tx = undefined; //postMessage is very picky about not passing null or empty transferables\n        }\n        callback(result, tx);\n      } catch(err) {\n        console.error(err);\n        callback(err);\n      }\n    }\n  }\n\n  function rehydrate(name, str) {\n    var result = void 0;\n    self.troikaDefine = function (r) { return result = r; };\n    var url = URL.createObjectURL(\n      new Blob(\n        [(\"/** \" + (name.replace(/\\*/g, '')) + \" **/\\n\\ntroikaDefine(\\n\" + str + \"\\n)\")],\n        {type: 'application/javascript'}\n      )\n    );\n    try {\n      importScripts(url);\n    } catch(err) {\n      console.error(err);\n    }\n    URL.revokeObjectURL(url);\n    delete self.troikaDefine;\n    return result\n  }\n\n  // Handler for all messages within the worker\n  self.addEventListener('message', function (e) {\n    var ref = e.data;\n    var messageId = ref.messageId;\n    var action = ref.action;\n    var data = ref.data;\n    try {\n      // Module registration\n      if (action === 'registerModule') {\n        registerModule(data, function (result) {\n          if (result instanceof Error) {\n            postMessage({\n              messageId: messageId,\n              success: false,\n              error: result.message\n            });\n          } else {\n            postMessage({\n              messageId: messageId,\n              success: true,\n              result: {isCallable: typeof result === 'function'}\n            });\n          }\n        });\n      }\n      // Invocation\n      if (action === 'callModule') {\n        callModule(data, function (result, transferables) {\n          if (result instanceof Error) {\n            postMessage({\n              messageId: messageId,\n              success: false,\n              error: result.message\n            });\n          } else {\n            postMessage({\n              messageId: messageId,\n              success: true,\n              result: result\n            }, transferables || undefined);\n          }\n        });\n      }\n    } catch(err) {\n      postMessage({\n        messageId: messageId,\n        success: false,\n        error: err.stack\n      });\n    }\n  });\n}\n\n/**\n * Fallback for `defineWorkerModule` that behaves identically but runs in the main\n * thread, for when the execution environment doesn't support web workers or they\n * are disallowed due to e.g. CSP security restrictions.\n */\nfunction defineMainThreadModule(options) {\n  var moduleFunc = function() {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    return moduleFunc._getInitResult().then(function (initResult) {\n      if (typeof initResult === 'function') {\n        return initResult.apply(void 0, args)\n      } else {\n        throw new Error('Worker module function was called but `init` did not return a callable function')\n      }\n    })\n  };\n  moduleFunc._getInitResult = function() {\n    // We can ignore getTransferables in main thread. TODO workerId?\n    var dependencies = options.dependencies;\n    var init = options.init;\n\n    // Resolve dependencies\n    dependencies = Array.isArray(dependencies) ? dependencies.map(function (dep) { return dep && dep._getInitResult ? dep._getInitResult() : dep; }\n    ) : [];\n\n    // Invoke init with the resolved dependencies\n    var initPromise = Promise.all(dependencies).then(function (deps) {\n      return init.apply(null, deps)\n    });\n\n    // Cache the resolved promise for subsequent calls\n    moduleFunc._getInitResult = function () { return initPromise; };\n\n    return initPromise\n  };\n  return moduleFunc\n}\n\nvar supportsWorkers = function () {\n  var supported = false;\n\n  // Only attempt worker initialization in browsers; elsewhere it would just be\n  // noise e.g. loading into a Node environment for SSR.\n  if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n    try {\n      // TODO additional checks for things like importScripts within the worker?\n      //  Would need to be an async check.\n      var worker = new Worker(\n        URL.createObjectURL(new Blob([''], { type: 'application/javascript' }))\n      );\n      worker.terminate();\n      supported = true;\n    } catch (err) {\n      if (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') ; else {\n        console.log(\n          (\"Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: [\" + (err.message) + \"]\")\n        );\n      }\n    }\n  }\n\n  // Cached result\n  supportsWorkers = function () { return supported; };\n  return supported\n};\n\nvar _workerModuleId = 0;\nvar _messageId = 0;\nvar _allowInitAsString = false;\nvar workers = Object.create(null);\nvar registeredModules = Object.create(null); //workerId -> Set<unregisterFn>\nvar openRequests = Object.create(null);\n\n\n/**\n * Define a module of code that will be executed with a web worker. This provides a simple\n * interface for moving chunks of logic off the main thread, and managing their dependencies\n * among one another.\n *\n * @param {object} options\n * @param {function} options.init\n * @param {array} [options.dependencies]\n * @param {function} [options.getTransferables]\n * @param {string} [options.name]\n * @param {string} [options.workerId]\n * @return {function(...[*]): {then}}\n */\nfunction defineWorkerModule(options) {\n  if ((!options || typeof options.init !== 'function') && !_allowInitAsString) {\n    throw new Error('requires `options.init` function')\n  }\n  var dependencies = options.dependencies;\n  var init = options.init;\n  var getTransferables = options.getTransferables;\n  var workerId = options.workerId;\n\n  if (!supportsWorkers()) {\n    return defineMainThreadModule(options)\n  }\n\n  if (workerId == null) {\n    workerId = '#default';\n  }\n  var id = \"workerModule\" + (++_workerModuleId);\n  var name = options.name || id;\n  var registrationPromise = null;\n\n  dependencies = dependencies && dependencies.map(function (dep) {\n    // Wrap raw functions as worker modules with no dependencies\n    if (typeof dep === 'function' && !dep.workerModuleData) {\n      _allowInitAsString = true;\n      dep = defineWorkerModule({\n        workerId: workerId,\n        name: (\"<\" + name + \"> function dependency: \" + (dep.name)),\n        init: (\"function(){return (\\n\" + (stringifyFunction(dep)) + \"\\n)}\")\n      });\n      _allowInitAsString = false;\n    }\n    // Grab postable data for worker modules\n    if (dep && dep.workerModuleData) {\n      dep = dep.workerModuleData;\n    }\n    return dep\n  });\n\n  function moduleFunc() {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    // Register this module if needed\n    if (!registrationPromise) {\n      registrationPromise = callWorker(workerId,'registerModule', moduleFunc.workerModuleData);\n      var unregister = function () {\n        registrationPromise = null;\n        registeredModules[workerId].delete(unregister);\n      }\n      ;(registeredModules[workerId] || (registeredModules[workerId] = new Set())).add(unregister);\n    }\n\n    // Invoke the module, returning a promise\n    return registrationPromise.then(function (ref) {\n      var isCallable = ref.isCallable;\n\n      if (isCallable) {\n        return callWorker(workerId,'callModule', {id: id, args: args})\n      } else {\n        throw new Error('Worker module function was called but `init` did not return a callable function')\n      }\n    })\n  }\n  moduleFunc.workerModuleData = {\n    isWorkerModule: true,\n    id: id,\n    name: name,\n    dependencies: dependencies,\n    init: stringifyFunction(init),\n    getTransferables: getTransferables && stringifyFunction(getTransferables)\n  };\n  return moduleFunc\n}\n\n/**\n * Terminate an active Worker by a workerId that was passed to defineWorkerModule.\n * This only terminates the Worker itself; the worker module will remain available\n * and if you call it again its Worker will be respawned.\n * @param {string} workerId\n */\nfunction terminateWorker(workerId) {\n  // Unregister all modules that were registered in that worker\n  if (registeredModules[workerId]) {\n    registeredModules[workerId].forEach(function (unregister) {\n      unregister();\n    });\n  }\n  // Terminate the Worker object\n  if (workers[workerId]) {\n    workers[workerId].terminate();\n    delete workers[workerId];\n  }\n}\n\n/**\n * Stringifies a function into a form that can be deserialized in the worker\n * @param fn\n */\nfunction stringifyFunction(fn) {\n  var str = fn.toString();\n  // If it was defined in object method/property format, it needs to be modified\n  if (!/^function/.test(str) && /^\\w+\\s*\\(/.test(str)) {\n    str = 'function ' + str;\n  }\n  return str\n}\n\n\nfunction getWorker(workerId) {\n  var worker = workers[workerId];\n  if (!worker) {\n    // Bootstrap the worker's content\n    var bootstrap = stringifyFunction(workerBootstrap);\n\n    // Create the worker from the bootstrap function content\n    worker = workers[workerId] = new Worker(\n      URL.createObjectURL(\n        new Blob(\n          [(\"/** Worker Module Bootstrap: \" + (workerId.replace(/\\*/g, '')) + \" **/\\n\\n;(\" + bootstrap + \")()\")],\n          {type: 'application/javascript'}\n        )\n      )\n    );\n\n    // Single handler for response messages from the worker\n    worker.onmessage = function (e) {\n      var response = e.data;\n      var msgId = response.messageId;\n      var callback = openRequests[msgId];\n      if (!callback) {\n        throw new Error('WorkerModule response with empty or unknown messageId')\n      }\n      delete openRequests[msgId];\n      callback(response);\n    };\n  }\n  return worker\n}\n\n// Issue a call to the worker with a callback to handle the response\nfunction callWorker(workerId, action, data) {\n  return new Promise(function (resolve, reject) {\n    var messageId = ++_messageId;\n    openRequests[messageId] = function (response) {\n      if (response.success) {\n        resolve(response.result);\n      } else {\n        reject(new Error((\"Error in worker \" + action + \" call: \" + (response.error))));\n      }\n    };\n    getWorker(workerId).postMessage({\n      messageId: messageId,\n      action: action,\n      data: data\n    });\n  })\n}\n\nexport { defineWorkerModule, stringifyFunction, terminateWorker };\n"],
  "mappings": "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",
  "names": ["result"]
}
